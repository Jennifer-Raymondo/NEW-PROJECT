doctype html
html
  head
    meta(charset="UTF-8")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")
    title Reports - MWF
    link(href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet")
    link(href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet")
    link(rel="stylesheet" href="css/style.css")
    style.
      .report-card {
        background-color: burlywood;
        color: #4e342e;
        border-radius: 0.75rem;
        transition: transform 0.2s ease-in-out;
        padding: 1rem;
      }
      .report-card:hover {
        transform: translateY(-3px);
      }
      .report-card i {
        font-size: 2rem;
        color: #4e342e;
      }
      .chart-container {
        background: #fff;
        border-radius: 0.75rem;
        padding: 1rem;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      }

  body
    // Navbar
    nav.navbar.navbar-expand-lg.navbar-dark.bg-dark
      .container-fluid
        a.navbar-brand(href='/dashboard') MWF Dashboard
        button.navbar-toggler(type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav")
          span.navbar-toggler-icon
        #navbarNav.collapse.navbar-collapse.justify-content-end
          ul.navbar-nav
            li.nav-item
              a.nav-link(href='/dashboard') Dashboard
            li.nav-item
              a.nav-link(href='/saleslist') Saleslist
            li.nav-item
              a.nav-link(href='/stocklist') Stocklist
            li.nav-item
              a.nav-link.active(href='/reports') Reports
            li.nav-item
              a.nav-link.text-danger(href='/logout') Log out

    // Page Content
    .container.my-5
      h2.mb-4 Reports & Analytics

      // ðŸ”¹ Summary Cards
      .row.g-3.mb-5
        .col-6.col-md-3
          .card.text-center.shadow-sm.report-card
            .card-body
              i.bx.bx-dollar-circle
              h5.mt-2 Total Sales
              p #{totalSales} Shs
        .col-6.col-md-3
          .card.text-center.shadow-sm.report-card
            .card-body
              i.bx.bx-cart
              h5.mt-2 Stock Expenses
              p #{totalStockExpense} Shs
        .col-6.col-md-3
          .card.text-center.shadow-sm.report-card
            .card-body
              i.bx.bx-package
              h5.mt-2 Finished Products
              p #{finishedProducts.totalQuantity} items
        .col-6.col-md-3
          .card.text-center.shadow-sm.report-card
            .card-body
              i.bx.bx-truck
              h5.mt-2 Raw Materials
              p #{rawMaterials.totalQuantity} items

      // ðŸ”¹ Charts Section
      .row.g-4
        .col-12.col-lg-6
          .chart-container
            h5.text-center.mb-3 Sales vs Stock
            canvas#salesStockChart(height="200")
        .col-12.col-lg-6
          .chart-container
            h5.text-center.mb-3 Finished vs Raw Materials
            canvas#materialsChart(height="200")

    // Scripts
    script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js")
    script(src="https://cdn.jsdelivr.net/npm/chart.js")

    script.
      const ctx1 = document.getElementById('salesStockChart').getContext('2d');
      new Chart(ctx1, {
        type: 'bar',
        data: {
          labels: ['Total Sales', 'Stock Expense'],
          datasets: [{
            label: 'Amount (UGX)',
            data: [!{totalSales}, !{totalStockExpense}],
            backgroundColor: ['#8d6e63', '#bcaaa4']
          }]
        }
      });

      const ctx2 = document.getElementById('materialsChart').getContext('2d');
      new Chart(ctx2, {
        type: 'pie',
        data: {
          labels: ['Finished Products', 'Raw Materials'],
          datasets: [{
            data: [!{finishedProducts.totalQuantity}, !{rawMaterials.totalQuantity}],
            backgroundColor: ['#8d6e63', '#d7ccc8']
          }]
        }
      });
